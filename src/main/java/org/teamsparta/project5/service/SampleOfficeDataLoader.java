package org.teamsparta.project5.service;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

@Slf4j
@Component
@RequiredArgsConstructor
public class SampleOfficeDataLoader implements CommandLineRunner {

    private final DocumentService documentService;

    @Override
    public void run(String... args) {
        log.info("=== 샘플 RAG 문서 로딩 시작 ===");

        try {
            // 1. 2025 인사·근태·휴가 통합 운영 매뉴얼
//            String manual = """
//                    2025 인사·근태·휴가 통합 운영 매뉴얼
//
//                    1. 총칙
//                    본 매뉴얼은 회사 구성원 모두가 공정하고 투명한 기준 아래 근무할 수 있도록 인사, 근태, 휴가에 관한 규칙을 통합하여 정리한 문서이다. 모든 임직원은 본 매뉴얼을 숙지해야 하며, 매뉴얼에 명시되지 않은 사항은 근로기준법 및 회사 인사규정에 따른다. 본 매뉴얼은 매년 1월 1일자로 갱신되며, 변경된 정책이 있을 경우 HR 부서가 별도로 공지한다. 구성원들은 최신 버전을 항상 참고하여 업무에 적용해야 한다.
//
//                    2. 근무시간 관리
//                    정규 근무시간은 평일 오전 9시부터 오후 6시까지이며, 점심시간 12시부터 1시는 유급 휴게시간으로 간주한다. 회사는 업무 효율성을 높이기 위해 유연근무제를 도입하였으며, 직원은 7시부터 10시 사이 원하는 시간에 출근할 수 있다. 단, 10시부터 16시는 코어 타임으로 지정되어 반드시 근무해야 한다. 업무 특성상 야간 근무가 필요한 경우 사전 승인 절차가 요구되며, 승인 없이 초과근무를 수행한 경우 인정되지 않는다. 근무시간 기록은 전자근태시스템에 자동으로 기록되며, 조작 또는 허위 기록이 적발될 경우 징계 대상이 될 수 있다.
//
//                    3. 연차 관리
//                    연차는 근속연수에 따라 차등 지급되며, 최초 입사 시 첫 1년간은 매월 개근 기준으로 1일씩 발생하여 최대 11일까지 부여된다. 1년 이상 근무한 직원은 기본 연차 15일이 주어진다. 근속 3년부터는 매 2년마다 연차가 1일씩 추가되며, 최대 25일까지 확대될 수 있다. 발생된 연차는 익년도에 이월되지 않으며, 연차 사용 촉진제도에 따라 HR 부서는 연차 사용률을 분기별로 점검한다. 직원은 연차 사용을 최소 3일 전에 신청해야 하며, 팀장 승인 후 확정된다. 부득이한 긴급 상황의 경우 당일 연차 사용이 허용되지만 승인 절차는 동일하게 적용된다.
//
//                    4. 반차 및 연장 휴가
//                    반차는 0.5일 단위로 사용할 수 있으며, 오전 반차와 오후 반차 중 선택하여 신청할 수 있다. 연차를 연속적으로 사용할 경우 3일 이상부터는 장기 휴가 승인 절차가 적용된다. 장기 휴가는 업무 인수인계를 명확히 기재한 문서를 HR 시스템에 첨부해야 하며, 팀장과 부서장의 추가 승인이 필요하다. 회사는 특정 기간 동안(예: 연말 결산, 분기 실적 보고 기간) 장기 휴가 사용을 제한할 수 있으며, 이는 사전에 해당 부서 공지로 안내한다.
//
//                    5. 병가 및 특별휴가
//                    병가는 연간 10일이 기본 제공되며, 3일 이상의 병가 사용 시 의사 소견서가 반드시 필요하다. 병가는 승인 절차가 필요 없으나, 직원은 상급자에게 사전에 가능한 빠르게 통지해야 한다. 특별휴가는 경조사 휴가를 비롯하여 출산휴가, 육아휴직, 배우자 출산휴가 등이 포함된다. 경조사 휴가는 상황에 따라 2일부터 최대 7일까지 제공되며, 세부 기준은 회사 경조사 규정에 따른다. 출산휴가는 90일로 구성되며, 이 중 45일은 출산 후 반드시 사용해야 한다.
//
//                    6. 초과근무 및 보상
//                    초과근무는 사전에 승인된 경우에 한하여 인정된다. 평일 초과근무는 1.5배, 주말 및 공휴일 근무는 2배의 수당이 지급된다. 단, 회사는 휴일 대체 제도를 운영하여 임직원이 원할 경우 초과근무 수당 대신 보상휴가 사용을 선택할 수 있다. 초과근무는 월 총 40시간을 넘을 수 없으며, 초과 시 별도 보고 절차가 필요하다. 모든 초과근무 기록은 시스템에 자동 반영되며, 회사는 근로시간 관리를 위해 월 1회 이상 HR 정기 점검을 실시한다.
//
//                    7. 재택근무 규정
//                    재택근무는 주 2회까지 허용되며, 사무실 출근이 어려운 경우 팀장 승인 시 예외적으로 추가 재택근무가 가능하다. 재택근무 시 직원은 회사가 지정한 보안 규정을 준수해야 하며, 사내망 VPN 접속 기록이 자동으로 저장된다. 재택근무 중 발생하는 사고는 원칙적으로 개인 책임이나, 업무 수행 중 발생한 사고는 회사의 승인 범위 내에서 보상될 수 있다. 재택근무 성과는 매월 평가되며, 미흡한 경우 재택근무 권한이 제한될 수 있다.
//
//                    8. 징계 및 예외 조항
//                    근태 규정을 반복적으로 위반할 경우 경고, 감봉, 정직 등 단계별 징계가 적용될 수 있다. 허위 근태 기록 제출, 무단결근, 부정한 휴가 사용은 즉시 징계 사유가 된다. 회사는 직원의 건강, 재해, 천재지변 등 불가피한 사유가 발생할 경우 규정을 일부 완화할 수 있으며, 이는 HR위원회 승인을 거친다. 본 매뉴얼의 최종 해석 권한은 HR 부서에 있으며, 모든 구성원은 본 규정에 따라 성실히 근무해야 한다.
//
//                    """;
//            addDocument("2025 인사·근태·휴가 통합 운영 매뉴얼.txt", manual);
//
//            // 2. 경조사 휴가 안내
//            String vacationManual = """
//                    1. 본인 결혼: 5일
//                    2. 자녀 결혼: 1일
//                    3. 배우자 사망: 5일
//                    4. 부모 사망: 5일
//                    5. 조부모 사망: 2일
//                    경조사 휴가 사용 시 증빙 서류(청첩장, 사망진단서 등)를 제출해야 한다.
//                    휴가는 사건 발생일 포함 근무일 기준으로 산정한다
//
//                    """;
//            addDocument("경조사 휴가 안내.txt", vacationManual);
//
//            // 3. 연차 발생 및 사용 규정 상세 설명서
//            String vacationGuide = """
//                    연차 발생 및 사용 규정 상세 설명서
//
//                    1. 연차 발생 기준
//                    연차는 근로기준법에 따라 1년 동안 80% 이상 근무한 정규직 직원에게 15일이 부여된다. 단, 첫해에는 매월 개근 시 1일의 연차가 발생하며, 총 11일을 넘지 아니한다. 연차는 입사일 기준으로 계산되며, 회사의 전사적 HR 시스템에 자동으로 기록된다. 직원은 인사정보시스템(HRIS)을 통해 자신의 연차 발생 내역을 연중 언제든지 확인할 수 있다. 연차 발생일은 매월 말일을 기준으로 부여된다.
//
//                    2. 연차 사용 절차
//                    연차는 최소 사용일 기준이 0.5일이며, 0.5일 단위로 사용할 수 있다. 연차 사용 시 직원은 팀 리더 및 부서장을 포함한 승인 절차를 거쳐야 하며, 승인 없이 무단으로 연차를 사용할 경우 무단결근으로 처리된다. 연차 신청은 최소 3일 전에 제출해야 하며, 업무 특성상 긴급한 상황에서는 당일 신청도 가능하지만 팀 리더의 승인을 반드시 받아야 한다. 연차 승인 여부는 시스템에서 자동으로 기록되며, 승인 이력은 추후 HR 감사를 위해 보관된다.
//
//                    3. 미사용 연차 처리
//                    연차는 해당 연도에 모두 사용해야 하며, 다음 해로 이월되지 않는다. 단, 회사 사정 또는 근로자의 요청에 의해 사용하지 못한 연차는 연말정산 이전 별도의 보상 절차를 통해 보상휴가 또는 수당으로 보상될 수 있다. 미사용 연차수당은 기본급의 일할 계산 방식에 따라 산정되며, 지급일은 매년 2월 급여 지급일과 동일하다. 단, 경영 악화 등으로 회사가 연차수당 지급 시점을 조정할 수 있으며, 이는 사내 공지를 통해 미리 안내한다.
//
//                    4. 특별규정
//                    프로젝트성 근무를 수행하는 직원의 경우 특정 기간 동안은 연차 사용 제한이 있을 수 있으며, 이는 프로젝트 계약서에 명시된다. 해외 파견 직원은 현지 법률에 따라 연차 산정 방식이 변경될 수 있으며, 이는 HR Global 팀이 별도 안내한다.
//
//                    """;
//            addDocument("연차 발생 및 사용 규정 상세 설명서.txt", vacationGuide);
//
//            // 4. 연차 유급휴가
//            String vacationManual2 = """
//                    1. 연차 발생 기준
//                    - 연차는 입사일로부터 1년 동안의 근로일수를 기준으로 산정한다.
//                    - 입사 첫 해에는 월 1개의 월차가 발생하며, 1년 만근 후에는 15개의 연차가 발생한다.
//                    - 근속연수 3년부터는 매 2년마다 연차가 1일씩 추가된다.
//
//                    2. 연차 사용 기준
//                    - 연차는 최소 1일 단위로 사용한다.
//                    - 반차 또는 시간 단위 연차는 회사가 허용하는 경우에 한해 사용할 수 있다.
//
//                    3. 사용 기한
//                    - 발생한 연차는 다음 해 1년 동안 사용 가능하다.
//                    - 미사용 연차는 연말 정산 기간에 수당으로 지급된다.
//                    """;
//            addDocument("연차 유급휴가.txt", vacationManual2);
//
//            // 5. 기능 개요
//            String faq = """
//                    Q1. 연차를 이월할 수 있나요?
//                    A1. 법적 기준에 따라 1년간 사용하지 않은 연차는 이월할 수 없습니다.
//
//                    Q2. 연차 사용 승인 기준은 어떻게 되나요?
//                    A2. 팀장 승인 후 사용 가능합니다.
//
//                    Q3. 경조사 휴가와 연차를 함께 사용할 수 있나요?
//                    A3. 가능합니다. 단, 경조사 휴가부터 우선적으로 적용됩니다.
//
//                    """;
//            addDocument("연차faq.txt", faq);
//
//            // 6. 출장비 정산
//            String businessTrip = """
//                    1. 교통비
//                    - 국내 이동 시 KTX 기준 실비 지급한다.
//                    - 택시비는 목적지 10km 이내일 경우만 인정한다.
//
//                    2. 숙박비
//                    - 평일: 최대 120,000원
//                    - 주말 또는 휴일: 최대 150,000원
//
//                    3. 식비
//                    - 1일 30,000원 정액 지급한다.
//
//                    4. 정산 절차
//                    - 출장 종료 후 7일 이내 영수증 제출 및 정산서 작성.
//
//                    """;
//            addDocument("출장비 정산.txt", businessTrip);
//
//            // 7. 출장비 상세 매뉴얼
//            String businessTripDetail = """
//                    출장비 지급 및 정산 규정 상세 설명서
//
//                    1. 출장비 지급 대상
//                    출장비는 회사의 승인된 목적에 따라 국내 및 해외에서 공식 업무를 수행하는 직원에게 지급된다. 출장비의 지급 대상은 정규직, 계약직, 파견직을 포함한다. 단, 개인적인 사유로 인해 출장 일정을 변경하거나 추가 비용이 발생한 경우 회사는 해당 비용에 대해 책임을 지지 않는다. 출장비는 출장 신청서가 승인된 이후 HR 시스템에서 자동으로 지급 절차가 시작된다.
//
//                    2. 숙박비 규정
//                    숙박비는 출장지의 지역등급에 따라 차등 지급되며, 국내의 경우 1급 지역, 2급 지역, 특수 지역으로 구분된다. 해외 출장의 경우 해당 국가의 체류 비용 수준을 감안하여 별도의 기준표가 적용된다. 직원은 지정된 호텔 또는 회사와 계약된 숙박시설을 우선적으로 사용해야 하며, 개인적으로 숙박 시설을 선택하는 경우 비용 초과분은 직원이 부담한다. 숙박비 영수증은 체크아웃 후 3일 이내 제출해야 하며, 미제출 시 해당 금액은 인정되지 않는다.
//
//                    3. 교통비 규정
//                    교통비는 항공권, KTX, 시내교통비 등을 포함한다. 항공권은 일반적으로 이코노미 클래스를 기준으로 하며, 부득이한 사유 없이 비즈니스 클래스를 이용할 경우 추가 비용은 직원에게 청구될 수 있다. 시내 교통비는 영수증 제출을 원칙으로 하며, 영수증 미제출 시 정액 기준으로 처리된다. 해외 출장 시에는 현지 교통 규정 및 환율에 따라 처리 기준이 달라질 수 있으며, 회사는 출장비 정산 시점의 기준 환율을 적용한다.
//
//                    4. 식비 및 기타 비용
//                    식비는 일일 기준으로 정액 지급되며, 국내 출장의 경우 1일 3만원, 해외 출장의 경우 출장급 국가의 등급에 따라 1일 40~80달러의 범위에서 지급된다. 업무와 관련된 기타 비용(회의실 대여료, 프린트 비용 등)은 영수증 제출 시 정산 가능하다. 다만 회사 정책상 인정되지 않는 비용(개인 쇼핑, 숙박 업그레이드 비용 등)은 정산 대상에서 제외된다.
//
//                    5. 부정 사용 방지 규정
//                    직원이 출장비를 부정 신청하거나 허위 영수증을 제출할 경우 회사는 즉시 해당 직원에 대한 감사 절차를 진행한다. 부정 사용이 확인될 경우 출장비 환수 조치뿐 아니라 인사징계가 이루어질 수 있으며, 중대한 경우 법적 조치도 가능하다.
//
//                     """;
//            addDocument("출장비 상세 메뉴얼", businessTripDetail);
//
//            log.info("=== 샘플 RAG 문서 로딩 완료: 총 7개 문서 ===");

        } catch (Exception e) {
            log.error("샘플 데이터 로딩 실패: {}", e.getMessage(), e);
        }
    }

    private void addDocument(String filename, String content) {
        try {
            documentService.addTextDocument(filename, content);
            log.info("✓ 문서 추가 완료: {}", filename);
        } catch (Exception e) {
            log.error("✗ 문서 추가 실패: {} - {}", filename, e.getMessage());
        }
    }
}
