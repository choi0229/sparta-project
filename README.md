# Week 3: μ¥λ°”κµ¬λ‹ & λ©€ν‹° λ λ²¨ ν¬μΈνΈ μ‹μ¤ν…

> **ν•™μµ λ©ν‘:** μΈλ©”λ¨λ¦¬ μΊμ‹± λ° λ‹¨μ„ ν…μ¤νΈ, MockMvc ν…μ¤νΈ μ½”λ“ μ‘μ„±

## π“‹ λ©μ°¨

- [ν”„λ΅μ νΈ κ°μ”](#-ν”„λ΅μ νΈ-κ°μ”)
- [κΈ°μ  μ¤νƒ](#-κΈ°μ -μ¤νƒ)
- [ERD μ„¤κ³„](#-erd-μ„¤κ³„)
- [κµ¬ν„ μ”κµ¬μ‚¬ν•­](#-κµ¬ν„-μ”κµ¬μ‚¬ν•­)
- [ν”„λ΅μ νΈ κµ¬μ΅°](#-ν”„λ΅μ νΈ-κµ¬μ΅°)
- [ν•™μµ λ‚΄μ©](#-ν•™μµ-λ‚΄μ©)

---

## π― ν”„λ΅μ νΈ κ°μ”

μ¥λ°”κµ¬λ‹ κΈ°λ°μ **λ©€ν‹° λ λ²¨ ν¬μΈνΈ μ λ¦½ μ‹μ¤ν…**μ„ κµ¬μ¶•ν•©λ‹λ‹¤.

μΈλ©”λ¨λ¦¬ μ¥λ°”κµ¬λ‹, ν¬μΈνΈ μ§€κ°‘ κ΄€λ¦¬, κ·Έλ¦¬κ³  λ³µμ΅ν• λΉ„μ¦λ‹μ¤ λ΅μ§μ„ **ν…μ¤νΈ μ£Όλ„ κ°λ°(TDD)** λ°©μ‹μΌλ΅ κµ¬ν„ν•©λ‹λ‹¤.

**ν•µμ‹¬ κΈ°λ¥:**
- μΈλ©”λ¨λ¦¬ μ¥λ°”κµ¬λ‹ κ΄€λ¦¬
- ν¬μΈνΈ μ λ¦½/μ‚¬μ©/μ†λ©Έ μ‹μ¤ν…
- μΉ΄ν…κ³ λ¦¬λ³„ μ°¨λ“± ν¬μΈνΈ μ λ¦½
- μ£Όλ¬Έ μƒμ„± λ° κ²°μ  ν”λ΅μ°
- λ¶€λ¶„ ν™λ¶ μ²λ¦¬
- AOP κΈ°λ° κ°μ‚¬ λ΅κ·Έ

---

## π› οΈ κΈ°μ  μ¤νƒ

| λ¶„λ¥ | κΈ°μ  |
|------|------|
| **Language** | Java 17 |
| **Framework** | Spring Boot 3.3.5 |
| **ORM** | Spring Data JPA |
| **Database** | MySQL 8.0 |
| **Migration** | Flyway |
| **AOP** | Spring AOP |
| **Testing** | JUnit 5, MockMvc, AssertJ |
| **Build Tool** | Gradle |
| **Containerization** | Docker |

---

## π“ ERD μ„¤κ³„

### μ£Όμ” μ—”ν‹°ν‹°
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚      User        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ id (PK)          β”‚
β”‚ name             β”‚
β”‚ email (UK)       β”‚
β”‚ password_hash    β”‚
β”‚ created_at       β”‚
β”‚ updated_at       β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚
         β”‚ 1:1
         β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Point_Wallet    β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ id (PK)          β”‚
β”‚ user_id (FK)     β”‚
β”‚ balance          β”‚
β”‚ active           β”‚
β”‚ created_at       β”‚
β”‚ updated_at       β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚
         β”‚ 1:N
         β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ Point_Transaction    β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ id (PK)              β”‚
β”‚ point_wallet_id (FK) β”‚
β”‚ purchase_id (FK)     β”‚
β”‚ type (ENUM)          β”‚
β”‚ amount               β”‚
β”‚ expires_at           β”‚
β”‚ created_at           β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”


β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”       β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”       β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚     Product      β”‚       β”‚    Purchase      β”‚       β”‚ Purchase_Product β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤       β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤       β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ id (PK)          β”‚       β”‚ id (PK)          β”‚       β”‚ id (PK)          β”‚
β”‚ name             β”‚       β”‚ user_id (FK)     β”‚       β”‚ purchase_id (FK) β”‚
β”‚ price            β”‚       β”‚ total_price      β”‚       β”‚ product_id (FK)  β”‚
β”‚ stock            β”‚       β”‚ earned_point     β”‚       β”‚ quantity         β”‚
β”‚ category         β”‚       β”‚ used_points      β”‚       β”‚ price            β”‚
β”‚ created_at       β”‚       β”‚ status           β”‚       β”‚ created_at       β”‚
β”‚ updated_at       β”‚       β”‚ shipping_address β”‚       β”‚ updated_at       β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”       β”‚ created_at       β”‚       β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚                 β”‚ updated_at       β”‚               β”‚
         β”‚ N               β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”               β”‚
         β”‚                         β”‚                          β”‚
         β”‚                         β”‚ 1                        β”‚ N
         β”‚                         β”‚                          β”‚
         β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                   β”‚
                                   β”‚ 1:N
                                   β–Ό
                          β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                          β”‚     Refund       β”‚
                          β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
                          β”‚ id (PK)          β”‚
                          β”‚ purchase_id (FK) β”‚
                          β”‚ purchase_product β”‚
                          β”‚   _id (FK)       β”‚
                          β”‚ amount           β”‚
                          β”‚ quantity         β”‚
                          β”‚ reason           β”‚
                          β”‚ status           β”‚
                          β”‚ created_at       β”‚
                          β”‚ processed_at     β”‚
                          β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”


β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚         Cart (In-Memory)             β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ userId (Key)                         β”‚
β”‚ items: List<CartItem>                β”‚
β”‚   - productId                        β”‚
β”‚   - quantity                         β”‚
β”‚   - price                            β”‚
β”‚   - expectedPoints                   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### μ—°κ΄€κ΄€κ³„ μƒμ„Έ

**1. User β†” Point_Wallet (1:1)**
```
μ‚¬μ©μλ‹Ή ν•λ‚μ ν¬μΈνΈ μ§€κ°‘
- point_wallet.user_id β†’ user.id (FK, UNIQUE)
```

**2. Point_Wallet β†” Point_Transaction (1:N)**
```
ν¬μΈνΈ μ§€κ°‘μ λ¨λ“  κ±°λ μ΄λ ¥
- point_transaction.point_wallet_id β†’ point_wallet.id (FK)
```

**3. User β†” Purchase (1:N)**
```
μ‚¬μ©μμ λ¨λ“  μ£Όλ¬Έ λ‚΄μ—­
- purchase.user_id β†’ user.id (FK)
```

**4. Purchase β†” Purchase_Product (1:N)**
```
μ£Όλ¬Έμ— ν¬ν•¨λ μƒν’λ“¤
- purchase_product.purchase_id β†’ purchase.id (FK)
```

**5. Product β†” Purchase_Product (1:N)**
```
μƒν’μ νλ§¤ μ΄λ ¥
- purchase_product.product_id β†’ product.id (FK)
```

**6. Purchase β†” Refund (1:N)**
```
μ£Όλ¬Έμ ν™λ¶ λ‚΄μ—­ (λ¶€λ¶„ ν™λ¶ μ§€μ›)
- refund.purchase_id β†’ purchase.id (FK)
- refund.purchase_product_id β†’ purchase_product.id (FK)
```

**7. Purchase β†” Point_Transaction (1:N)**
```
μ£Όλ¬ΈμΌλ΅ λ°μƒν• ν¬μΈνΈ κ±°λ
- point_transaction.purchase_id β†’ purchase.id (FK)
```

### ν…μ΄λΈ”λ³„ μΈλ±μ¤ μ „λµ

| ν…μ΄λΈ” | μΈλ±μ¤ | λ©μ  |
|--------|--------|------|
| **point_wallet** | `user_id` | μ‚¬μ©μλ³„ μ§€κ°‘ μ΅°ν |
| **point_transaction** | `point_wallet_id` | μ§€κ°‘λ³„ κ±°λ μ΄λ ¥ |
| **point_transaction** | `purchase_id` | μ£Όλ¬Έλ³„ ν¬μΈνΈ κ±°λ |
| **refund** | `purchase_id` | μ£Όλ¬Έλ³„ ν™λ¶ λ‚΄μ—­ |
| **refund** | `purchase_product_id` | μƒν’λ³„ ν™λ¶ μ΄λ ¥ |

---

## π“ κµ¬ν„ μ”κµ¬μ‚¬ν•­

### 1. μ‚¬μ©μ κ΄€λ¦¬ (User Management)

#### β… ν•„μ κµ¬ν„

**μ‚¬μ©μ CRUD API**
- μ‚¬μ©μ μƒμ„±/μ΅°ν/μμ •/μ‚­μ  API μ κ³µ
- μ΄λ©”μΌ μ¤‘λ³µ κ²€μ¦ (νμ›κ°€μ… μ‹)
- μ‚¬μ©μ μƒμ„± μ‹ ν¬μΈνΈ μ§€κ°‘ μλ™ μƒμ„±
- μ‚¬μ©μ μ‚­μ  μ‹ ν¬μΈνΈ μ§€κ°‘ λΉ„ν™μ„±ν™” (Soft Delete)
- `ApiResponse` ν¬λ§·μΌλ΅ ν†µμΌλ μ‘λ‹µ

#### π€ λ„μ „ κ³Όμ 

**AOP κΈ°λ° κ°μ‚¬ λ΅κ·Έ**
- `@Loggable` μ–΄λ…Έν…μ΄μ… λλ” κ³µν†µ ν¬μΈνΈμ»· μ‚¬μ©
- μ‚¬μ©μ μƒμ„±/μμ • μ”μ²­ μ‹ μλ™ λ΅κΉ…
- λ©”μ„λ“ μ‹¤ν–‰ μ‹κ°„ μΈ΅μ •

**μ‚¬μ©μ ν†µκ³„ μΊμ‹±**
- μµκ·Ό μ£Όλ¬Έ μ λ° ν¬μΈνΈ ν•©κ³„ κ³„μ‚°
- Map λλ” Caffeine κΈ°λ° μΈλ©”λ¨λ¦¬ μΊμ‹
- TTL μ„¤μ • (μ: 5λ¶„)

#### π§ ν•„μ ν…μ¤νΈ μΌ€μ΄μ¤

- μ΄λ©”μΌ μ¤‘λ³µ κ°€μ… μ‹ `ServiceException` λ°μƒ (λ‹¨μ„ ν…μ¤νΈ)
- μ‚­μ  API νΈμ¶ ν›„ μ§€κ°‘ `active` ν”λκ·Έκ°€ falseλ΅ λ³€κ²½ (MockMvc ν…μ¤νΈ)

---

### 2. μ¥λ°”κµ¬λ‹ μ„λΉ„μ¤ (Cart Service)

#### β… ν•„μ κµ¬ν„

**μ¥λ°”κµ¬λ‹ CRUD API**
- μ¥λ°”κµ¬λ‹ ν•­λ© μ¶”κ°€ API
- μ¥λ°”κµ¬λ‹ ν•­λ© μ‚­μ  API
- μ¥λ°”κµ¬λ‹ μ΅°ν API
- μ¥λ°”κµ¬λ‹ μ”μ•½ μ •λ³΄ λ°ν™:
  - μ΄ μƒν’ κ°μ
  - μ΄ κΈμ•΅
  - μμƒ μ λ¦½ ν¬μΈνΈ

**λΉ„μ¦λ‹μ¤ κ·μΉ™**
- μµλ€ ν’λ© μ μ ν• (20κ°)
- μ¬κ³  μλ‰ κ²€μ¦
- μΉ΄ν…κ³ λ¦¬λ³„ μ°¨λ“± ν¬μΈνΈ μ λ¦½λ¥  μ μ©

#### π€ λ„μ „ κ³Όμ 

**μ €μ¥μ† μ¶”μƒν™”**
- `CartStorage` μΈν„°νμ΄μ¤ μ •μ
- μΈλ©”λ¨λ¦¬ κµ¬ν„μ²΄ (`InMemoryCartStorage`)
- Redis λ“±μΌλ΅ κµμ²΄ κ°€λ¥ν• κµ¬μ΅°

**μΏ ν°/ν”„λ΅λ¨μ… λ°°μ μ μ©**
- μ¥λ°”κµ¬λ‹μ— μΏ ν° μ½”λ“ μ μ© API
- μμƒ ν¬μΈνΈμ— λ°°μ μ μ© (μ: 2λ°°)
- μΏ ν° μ ν¨μ„± κ²€μ¦

#### π§ ν•„μ ν…μ¤νΈ μΌ€μ΄μ¤

- μΉ΄ν…κ³ λ¦¬λ³„ κ°€μ¤‘μΉκ°€ λ°μλ μμƒ ν¬μΈνΈ κ³„μ‚° (λ‹¨μ„ ν…μ¤νΈ)
- μµλ€ ν’λ© μ(20κ°) μ΄κ³Ό μ‹ 400 μ‘λ‹µ (MockMvc ν…μ¤νΈ)

---

### 3. ν¬μΈνΈ κ³„μ • λ° μ λ¦½ κ·μΉ™ (Point System)

#### β… ν•„μ κµ¬ν„

**ν¬μΈνΈ μ§€κ°‘ (PointWallet)**
- μ‚¬μ©μλ‹Ή 1κ°μ ν¬μΈνΈ μ§€κ°‘
- ν„μ¬ μ”μ•΅ κ΄€λ¦¬
- ν™μ„±ν™” μƒνƒ κ΄€λ¦¬ (`active` ν”λκ·Έ)

**ν¬μΈνΈ νΈλμ­μ… (PointTransaction)**
- λ¨λ“  ν¬μΈνΈ κ±°λ μ΄λ ¥ κΈ°λ΅
- κ±°λ μ ν•: `EARN` (μ λ¦½), `DEDUCTED` (μ‚¬μ©), `EXTINCTION` (μ†λ©Έ)
- μ λ¦½ ν¬μΈνΈ λ§λ£μΌ κ΄€λ¦¬ (1λ…„)

**ν¬μΈνΈ μ‚¬μ© κ·μΉ™**
- μµμ† μ£Όλ¬Έ κΈμ•΅: 5,000μ› μ΄μƒ
- μµμ† μ‚¬μ© ν¬μΈνΈ: 1,000 ν¬μΈνΈ μ΄μƒ
- μ”μ•΅ λ¶€μ΅± μ‹ μ‚¬μ© λ¶κ°€

**Flyway λ§μ΄κ·Έλ μ΄μ…**
- `point_wallet` ν…μ΄λΈ” μƒμ„±
- `point_transaction` ν…μ΄λΈ” μƒμ„±
- μΈλ±μ¤ μ„¤μ • (`user_id`, `point_wallet_id`)

#### π€ λ„μ „ κ³Όμ 

**μ΄λ²¤νΈ λ°ν–‰**
- ν¬μΈνΈ μ λ¦½/μ°¨κ° μ‹ λ‚΄λ¶€ μ΄λ²¤νΈ λ°ν–‰
- μ΄λ²¤νΈ νΌλΈ”λ¦¬μ…”λ¥Ό ν†µν• λ΅κ·Έ κΈ°λ΅

**ν¬μΈνΈ λ§λ£ μ²λ¦¬ API**
- λ§λ£λ ν¬μΈνΈ μ΅°ν
- λ§λ£ μ²λ¦¬ μλ™ μ‹¤ν–‰
- μ†λ©Έ νΈλμ­μ… μƒμ„±

#### π§ ν•„μ ν…μ¤νΈ μΌ€μ΄μ¤

- ν¬μΈνΈ μ°¨κ° μ‹ μ”μ•΅ λ¶€μ΅± μμ™Έ λ°μƒ (λ‹¨μ„ ν…μ¤νΈ)
- μµμ† μ‚¬μ© κΈμ•΅/ν¬μΈνΈ μ΅°κ±΄ μ„λ° μ‹ μμ™Έ λ°μƒ (μ„λΉ„μ¤ ν…μ¤νΈ)

---

### 4. μ£Όλ¬Έ μƒμ„± λ° κ²°μ  ν”λ΅μ° (Order & Payment)

#### β… ν•„μ κµ¬ν„

**μ£Όλ¬Έ μƒμ„± νΈλμ­μ…**
- μ¥λ°”κµ¬λ‹ β†’ μ£Όλ¬Έ μƒμ„± β†’ ν¬μΈνΈ μ²λ¦¬λ¥Ό ν•λ‚μ νΈλμ­μ…μΌλ΅ λ¬¶μ
- μ²λ¦¬ μμ„:
  1. μ¥λ°”κµ¬λ‹ μ΅°ν λ° κ²€μ¦
  2. μ£Όλ¬Έ(Purchase) μƒμ„±
  3. μ£Όλ¬Έ μƒν’(PurchaseProduct) μƒμ„±
  4. μƒν’ μ¬κ³  μ°¨κ°
  5. ν¬μΈνΈ μ‚¬μ© μ²λ¦¬ (μ„ νƒ)
  6. ν¬μΈνΈ μ λ¦½ μ²λ¦¬
  7. μ£Όλ¬Έ μƒνƒ `COMPLETED`λ΅ λ³€κ²½
  8. μ¥λ°”κµ¬λ‹ λΉ„μ°κΈ°

**μ£Όλ¬Έ μ •λ³΄**
- μ£Όλ¬Έ ID, μ‚¬μ©μ ID
- μ΄ μ£Όλ¬Έ κΈμ•΅
- μ‚¬μ©ν• ν¬μΈνΈ
- μ λ¦½λ ν¬μΈνΈ
- λ°°μ†΅ μ£Όμ†
- μ£Όλ¬Έ μƒνƒ (`PENDING`, `COMPLETED`, `CANCELED`)

#### π€ λ„μ „ κ³Όμ 

**Mock Payment μ²λ¦¬**
- Payment μΈν„°νμ΄μ¤ μ •μ
- μ„±κ³µ/μ‹¤ν¨ μ‹λ‚λ¦¬μ¤ μ£Όμ… κ°€λ¥
- μ „λµ ν¨ν„΄ μ μ©

**μ‹¤ν–‰ μ‹κ°„ AOP**
- μ£Όλ¬Έ μ„λΉ„μ¤μ— μ„±λ¥ μΈ΅μ • AOP μ μ©
- λλ¦° μ£Όλ¬Έ(3μ΄ μ΄μƒ) κ²½κ³  λ΅κ·Έ

#### π§ ν•„μ ν…μ¤νΈ μΌ€μ΄μ¤

- μ£Όλ¬Έ μ„±κ³µ ν›„ ν¬μΈνΈ μ λ¦½ νΈλμ­μ… μƒμ„± ν™•μΈ (ν†µν•© ν…μ¤νΈ)
- λ‘ λ² μ—°μ† μ£Όλ¬Έ μ‹ ν¬μΈνΈ μ”μ•΅ μ¬λ°”λ¥΄κ² κ°μ† (λ‹¨μ„ ν…μ¤νΈ)

---

### 5. ν™λ¶ λ° ν¬μΈνΈ νμ (Refund)

#### β… ν•„μ κµ¬ν„

**ν™λ¶ μ”μ²­ API**
- ν•„μ μ…λ ¥: μ£Όλ¬Έ ID, μ£Όλ¬Έ μƒν’ ID, ν™λ¶ μλ‰, ν™λ¶ μ‚¬μ 
- ν™λ¶ κ°€λ¥ μ΅°κ±΄:
  - μ£Όλ¬Έ μƒνƒκ°€ `COMPLETED`
  - ν™λ¶ μλ‰μ΄ μ£Όλ¬Έ μλ‰ μ΄ν•
- ν™λ¶ μƒνƒ: `REQUESTED`, `APPROVED`, `REJECTED`

**ν™λ¶ μΉμΈ μ²λ¦¬**
- ν™λ¶ μΉμΈ μ‹ μ²λ¦¬:
  1. μƒν’ μ¬κ³  λ³µμ›
  2. μ‚¬μ©ν• ν¬μΈνΈ λ³µμ› (λΉ„μ¨ κ³„μ‚°)
  3. μ λ¦½λ ν¬μΈνΈ νμ
  4. ν™λ¶ μƒνƒ `APPROVED`λ΅ λ³€κ²½
  5. μ „μ²΄ ν™λ¶ μ‹ μ£Όλ¬Έ μƒνƒ `CANCELED`λ΅ λ³€κ²½

**λ¶€λ¶„ ν™λ¶ μ§€μ›**
- μ£Όλ¬Έ ν•­λ©λ³„ μλ‰ μ„ νƒ ν™λ¶
- ν™λ¶ κΈμ•΅ λΉ„μ¨ κ³„μ‚°
- μ—¬λ¬ λ² ν™λ¶ κ°€λ¥ (μ”μ—¬ μλ‰κΉμ§€)

**ν™λ¶ μ΅°ν API**
- μ‚¬μ©μλ³„ ν™λ¶ λ‚΄μ—­ μ΅°ν
- ν™λ¶ μƒνƒλ³„ ν•„ν„°λ§

#### π€ λ„μ „ κ³Όμ 

**κ°μ‚¬ λ΅κ·Έ**
- ν™λ¶ μ§„ν–‰ μ‹ λ³„λ„ λ΅κ·Έ ν…μ΄λΈ” κΈ°λ΅
- AOPλ¥Ό ν™μ©ν• μλ™ λ΅κΉ…
- ν™λ¶ μΉμΈ/κ±°μ  μ΄λ ¥ μ¶”μ 

**λ¶€λ¶„ ν™λ¶ κ³ λ„ν™”**
- μ£Όλ¬Έ ν•­λ©λ³„ μλ‰ μ„ νƒ
- ν™λ¶ μ»¤λ§¨λ“ κ°μ²΄ μ„¤κ³„
- λ³µμ΅ν• λΉ„μ¨ κ³„μ‚° λ΅μ§

#### π§ ν•„μ ν…μ¤νΈ μΌ€μ΄μ¤

- ν™λ¶ μΉμΈ μ‹ μ¬κ³ /ν¬μΈνΈ/μ£Όλ¬Έ μƒνƒ λ³€κ²½ ν™•μΈ (API ν…μ¤νΈ)
- ν™λ¶ μ”μ²­ μλ‰μ΄ μ”μ—¬ μλ‰ μ΄κ³Ό μ‹ μμ™Έ λ°μƒ (λ‹¨μ„ ν…μ¤νΈ)

---

## π§ ν…μ¤νΈ μ „λµ

**λ‹¨μ„ ν…μ¤νΈ (Unit Test)**
- λΉ„μ¦λ‹μ¤ λ΅μ§ κ²€μ¦
- Mock κ°μ²΄ ν™μ©
- μμ™Έ μƒν™© ν…μ¤νΈ

**ν†µν•© ν…μ¤νΈ (Integration Test)**
- μ—¬λ¬ μ»΄ν¬λ„νΈ ν‘λ ¥ κ²€μ¦
- @SpringBootTest μ‚¬μ©
- νΈλμ­μ… λ΅¤λ°± ν™•μΈ

**API ν…μ¤νΈ (MockMvc)**
- HTTP μ”μ²­/μ‘λ‹µ κ²€μ¦
- JSON ν•μ‹ κ²€μ¦
- μƒνƒ μ½”λ“ ν™•μΈ

---

## π“ ν•™μµ λ‚΄μ©

### 1. μΈλ©”λ¨λ¦¬ μΊμ‹±

**ν•™μµ ν¬μΈνΈ:**
- β… ConcurrentHashMap ν™μ©
- β… μ €μ¥μ† μ¶”μƒν™” (μΈν„°νμ΄μ¤)
- β… μ„Έμ…μ„± λ°μ΄ν„° κ΄€λ¦¬


### 2. AOP (Aspect-Oriented Programming)

**ν•™μµ ν¬μΈνΈ:**
- β… ν΅λ‹¨ κ΄€μ‹¬μ‚¬ λ¶„λ¦¬
- β… @Aspect, @Around, @AfterReturning
- β… λ΅κΉ…, μ„±λ¥ μΈ΅μ •, κ°μ‚¬ λ΅κ·Έ


### 3. ν…μ¤νΈ μ£Όλ„ κ°λ° (TDD)

**ν•™μµ ν¬μΈνΈ:**
- β… Given-When-Then ν¨ν„΄
- β… λ‹¨μ„ ν…μ¤νΈ (Mockito)
- β… ν†µν•© ν…μ¤νΈ (MockMvc)
- β… AssertJ ν™μ©

**ν…μ¤νΈ κ³„μΈµ:**
```
λ‹¨μ„ ν…μ¤νΈ (Unit Test)
  β””β”€ λΉ„μ¦λ‹μ¤ λ΅μ§ κ²€μ¦
  β””β”€ Mock κ°μ²΄ ν™μ©

ν†µν•© ν…μ¤νΈ (Integration Test)
  β””β”€ μ—¬λ¬ μ»΄ν¬λ„νΈ ν‘λ ¥ κ²€μ¦
  β””β”€ @SpringBootTest

API ν…μ¤νΈ (MockMvc)
  β””β”€ HTTP μ”μ²­/μ‘λ‹µ κ²€μ¦
  β””β”€ μ‹¤μ  JSON μ‘λ‹µ ν™•μΈ
```

### 4. λ³µμ΅ν• λΉ„μ¦λ‹μ¤ λ΅μ§

**ν•™μµ ν¬μΈνΈ:**
- β… νΈλμ­μ… κ²½κ³„ μ„¤μ •
- β… λ„λ©”μΈ μ΄λ²¤νΈ
- β… μƒνƒ μ „μ΄ κ΄€λ¦¬
- β… λΉ„μ¦λ‹μ¤ κ·μΉ™ κ²€μ¦


### 5. Flyway λ§μ΄κ·Έλ μ΄μ…

**ν•™μµ ν¬μΈνΈ:**
- β… μ μ§„μ  μ¤ν‚¤λ§ λ³€κ²½
- β… λ²„μ „ κ΄€λ¦¬
- β… λ΅¤λ°± μ „λµ

---

## π’¬ νκ³ 

### π μν• μ 
- ν…μ¤νΈ μ£Όλ„ κ°λ°λ΅ μ•μ •μ μΈ μ½”λ“ μ‘μ„±
- AOPλ¥Ό ν™μ©ν• ν΅λ‹¨ κ΄€μ‹¬μ‚¬ λ¶„λ¦¬
- λ³µμ΅ν• λΉ„μ¦λ‹μ¤ λ΅μ§μ νΈλμ­μ… κ΄€λ¦¬
- μΈλ©”λ¨λ¦¬ μΊμ‹± κµ¬ν„ κ²½ν—

### π¤” μ•„μ‰¬μ΄ μ 
- ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€κ°€ λ†’μ§€λ§ μ—£μ§€ μΌ€μ΄μ¤ λ¶€μ΅±
- AOP λ΅κΉ…μ΄ κ³Όλ„ν•κ² μ μ©λ¨
- ν¬μΈνΈ λ§λ£ λ΅μ§μ΄ λ³µμ΅ν•¨


---

**Last Updated:** 2025-12-19
